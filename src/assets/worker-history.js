function c({url:t,title:i,sessionId:a},e){return{url:t,title:i,lastVisitTime:e,id:a}}function m({window:t,tab:i,lastModified:a}){const e=a*1e3+999.999;return i?{isSession:!0,...c(i,e)}:{id:t.sessionId,isSession:!0,sessionWindow:t.tabs.map(s=>c(s)),title:`${t.tabs.length} tabs - ${t.tabs.map(s=>s.title).join(", ")}`,lastVisitTime:e}}function g([t,i]){const a=i.map(m).concat(t).sort((s,n)=>n.lastVisitTime-s.lastVisitTime),e=[];for(let s=0,n="";s<a.length;s+=1){const{url:o,...r}=a[s],l={...r,url:o==null?void 0:o.substring(0,1024)},u=new Date(r.lastVisitTime).toLocaleDateString();n===u||!n?e.push(l):e.push({headerDate:!0,lastVisitTime:r.lastVisitTime},l),n=u}return e}onmessage=t=>postMessage(g(t.data));
