// for Theme

body {
  background-color: var(--frame-bg);
  color: var(--frame-color);
}

.leafs,
.histories,
.tabs-wrap>open-window,
.histories .rows .current-date,
.histories .rows .current-date::before,
.current-window window-header::after {
  background-color: var(--pane-bg);
  color: var(--pane-color);
}

.folders .open>.marker>.title,
.current-tab::after,
.current-window window-header::before {
  background-color: var(--key-bg);
  color: var(--key-color);
}

.current-window window-header {
  border-bottom: 4px solid var(--key-bg);
}

.pane-header .pin-bookmark:hover::after {
  color: var(--key-bg) !important;
}

main.searching .form-query {
  background-color: var(--searching-bg);
}

.leaf:hover,
.folders .marker:not(.hilite):hover::before,
main:not(.drag-start-leaf):not(.drag-start-folder) .tabs-wrap>open-window:not(.tabs-collapsed)>.tab-wrap:hover,
.searching:not(.drag-start-leaf):not(.drag-start-folder) .tabs-wrap>open-window>.tab-wrap:hover,
.histories .rows>.history:not(.header-date):hover,
.date-collapsed~.histories .header-date:hover,
.date-collapsed~.histories .current-date:hover::after,
main:not(.drag-start-leaf):not(.drag-start-folder) .window.tabs-collapsed:hover window-header,
window-header:hover,
.tooltip,
.draggable-clone,
.draggable-clone>div,
.draggable-clone .title::before,
.drag-source,
.drag-source::before {
  background-color: var(--item-hover-bg);
  color: var(--item-hover-color);
}

.shade-right:hover~.zoom-out,
.shade-left:hover~.zoom-out {
  color: var(--item-hover-bg);
}

main:not(.searching):not(.drag-start-leaf):not(.drag-start-folder) .tabs-wrap>.tabs-collapsed>.tab-wrap:hover {
  border-color: var(--item-hover-bg);
}

.folders .marker:hover>.icon-fa-angle-right,
.folders .folder:not(.open)>.marker:not(.hilite):hover .title {
  color: var(--item-hover-color);
}

.tabs open-window.tabs-collapsed>.tab-wrap.drag-source {
  background-color: var(--item-hover-bg);
  border-color: var(--item-hover-bg);
}

// Dark theme handling

.theme-dark-pane {

  .leafs::-webkit-scrollbar-thumb,
  .histories::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, .3);
  }

  .leafs::-webkit-scrollbar-thumb:hover,
  .histories::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, .5);
  }

  .leafs .title::before {
    color: $dark-font-color;
  }

  &.zoom-pane .shade-left,
  &.zoom-pane .shade-right {
    background-color: $dark-shade-bg-color;
  }

  &.drag-start-leaf,
  &.drag-start-folder .folders,
  &.drag-start-folder .tabs {

    .leaf:not(.search-path),
    .tab-wrap:not(.match):not(.unmatch) {
      >.drop-top {

        &.drag-enter::before {
          border-color: lightgray !important;
        }
      }

      >.drop-bottom {

        &.drag-enter::before {
          border-color: lightgray !important;
        }
      }
    }
  }

  &.drag-start-leaf .folders>.folder>.marker,
  &.drag-start-folder .marker {

    >.drop-top {

      &.drag-enter::before {
        border-top-color: lightgray;
      }
    }

    >.drop-bottom {

      &.drag-enter {
        border-bottom-color: lightgray;
      }
    }
  }

  &.drag-start-leaf .leaf,
  &.drag-start-leaf .tab-wrap,
  &.drag-start-leaf .folders>.folder>.marker,
  &.drag-start-folder .leaf,
  &.drag-start-folder .marker,
  &.drag-start-folder .tab-wrap {

    >.drop-top.drag-enter::after,
    >.drop-bottom.drag-enter::after {
      border-left-color: lightgray;
    }
  }

  open-window window-header {

    button>i {
      color: $dark-icon-color;
    }
  }

  &:not(.searching).theme-dark-pane {
    .tabs-wrap>.tabs-collapsed {

      >.tab-wrap {
        background-color: $dark-icon-color;
      }
    }
  }
}

.theme-dark-frame {
  .pane-header::before {
    background-color: rgba(255, 255, 255, 0.15);
  }

  .pane-header,
  .form-query button>i {
    color: lightgray;
  }

  .form-query .query {
    color: $dark-font-color;
  }

  .title::before,
  .form-query .submit>i {
    color: $dark-icon-color;
  }

  .form-query,
  button:not(.submit):hover::after,
  button:not(.submit):focus::after {
    background-color: rgba(255, 255, 255, 0.3);
  }

  .form-query button:hover .icon-fa-ellipsis-v,
  .form-query button:focus .icon-fa-ellipsis-v,
  .pane-header button:not(.submit) {

    &.pin-bookmark::after,
    >i {
      color: $dark-icon-color;
    }
  }

  .form-query,
  .pane-header {

    button:hover::after,
    button:focus::after {
      background-color: rgba(255, 255, 255, 0.3);
    }
  }

  .form-query,
  .pane-header {
    button:active::after {
      background-color: $dark-icon-color;
    }
  }

  .folders::-webkit-scrollbar-thumb,
  .tabs::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, .3);

    &:hover {
      background-color: rgba(255, 255, 255, .5);
    }
  }

  .marker.hilite>.title::before {
    animation-name: hilite-folder-dark !important;
    animation-duration: 1.0s !important;
  }

  &.drag-start-leaf,
  &.drag-start-folder {
    .folders .marker>.drop-folder {
      position: absolute;
      z-index: 1;
      height: 100%;

      &.drag-enter {
        background-color: $drop-folder-bgcolor;

        &~.title {
          color: $font-color;

          &::before {
            color: $light-folder-color  !important;
          }
        }
      }
    }
  }
}

.theme-dark-hover {

  .leaf:hover .icon-fa-ellipsis-v,
  .marker:hover .icon-fa-ellipsis-v,
  .tab-wrap:hover .icon-x,
  .history:hover .icon-x,
  .window.tabs-collapsed:hover window-header>button>i,
  .window:not(.tabs-collapsed) window-header:hover>button>i,
  .folders .folder:not(.open)>.marker:hover>.title::before {
    color: rgba(255, 255, 255, 0.5);
  }

  .leaf,
  .marker,
  open-window,
  window-header {

    button:hover::after,
    button:focus::after {
      background-color: rgba(255, 255, 255, 0.3);
    }

    button:active::after {
      background-color: $dark-icon-color;
    }
  }
}

main:not(.theme-dark-hover) {

  .window.tabs-collapsed:hover .tabs-header>button>i,
  &.theme-dark-pane .tabs-header:hover>button>i {
    color: rgba(0, 0, 0, 0.5);
  }

  .leaf,
  .marker,
  open-window,
  window-header {

    button:hover::after,
    button:focus::after {
      background-color: rgba(0, 0, 0, 0.1);
    }

    button:active::after {
      background-color: rgba(0, 0, 0, 0.2);
    }
  }
}

.theme-dark-pane,
.theme-dark-frame {
  .window {
    border-color: transparent;
  }
}

.theme-dark-pane.theme-dark-frame .tabs .tabs-wrap {
  .window {
    border-color: $dark-icon-color;
    border-width: 1px;
    padding: 2px;
    padding-bottom: 3px;
  }
}

.theme-dark-key {
  .folders .open>.marker>.title::before {
    color: $dark-folder-color;
  }
}

.theme-dark-search.searching .form-query {
  button>.icon-fa-search {
    color: rgba(255, 255, 255, 0.7);
  }

  .query,
  .icon-x {
    color: $dark-font-color;
  }
}

main:not(.theme-dark-search).searching .form-query {
  button>.icon-fa-search {
    color: rgba(0, 0, 0, 0.5);
  }

  .query,
  .icon-x {
    color: $font-color;
  }
}